(this["webpackJsonpreact-course-bas"]=this["webpackJsonpreact-course-bas"]||[]).push([[0],{1676:function(e,t,a){},1677:function(e,t,a){},1682:function(e,t,a){},1683:function(e,t,a){},1684:function(e,t,a){},1685:function(e,t,a){},1686:function(e,t,a){},1689:function(e,t,a){},1692:function(e,t,a){"use strict";a.r(t);for(var c=a(0),n=a.n(c),r=a(27),s=a.n(r),i=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,1790)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))},o=a(30),u=a(142),j=a(41),d=a(22),b="/",l="/profile",h="/chats",O="/chat",f="/nochat",x="/cat",m="/signup",p="/signin",v=function(e){return e.profile},g="PROFILE::SHOW_NAME_ACTION",C="PROFILE::AUTHED_BOOL_ACTION",S=a(33),y=function(e){return{type:C,user:e}},w=a(3),E=function(){var e=Object(o.c)(v),t=e.name,a=e.showName,c=Object(o.b)();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h3",{children:"Profile Page"}),Object(w.jsx)("input",{type:"checkbox",checked:a,onChange:function(){c({type:g})}}),Object(w.jsx)("div",{children:a&&t})]})},A=function(){return Object(w.jsx)("h3",{children:"Home Page"})},k=a(17),_=a(1769),N=a(1782),I=a(96),L=a.n(I),T=a(1787),R=n.a.memo((function(e){var t=e.submit,a=Object(c.useRef)(null),n=Object(c.useState)(""),r=Object(k.a)(n,2),s=r[0],i=r[1],o=Object(c.useCallback)((function(){var e;t(s),i(""),null===(e=a.current)||void 0===e||e.focus()}),[s]),u=Object(c.useCallback)((function(e){i(e.target.value)}),[]);return Object(c.useEffect)((function(){var e;null===(e=a.current)||void 0===e||e.focus()}),[]),Object(w.jsxs)(T.a,{sx:{display:"flex",height:"57px"},children:[Object(w.jsx)(_.a,{value:s,onChange:u,inputRef:a,fullWidth:"true"}),Object(w.jsx)(N.a,{onClick:o,variant:"contained",endIcon:Object(w.jsx)(L.a,{})})]})})),M=a(10),D=a(20),F=a(45),P=a.n(F),H="autor",G=Array.from({length:10},(function(){return{name:P.a.name.findName(),avatar:P.a.image.avatar(),id:P.a.datatype.uuid()}})),U={},z=function(){var e=B[W];U=Object(D.a)(Object(D.a)({},U),{},Object(M.a)({},e.id,Array.from({length:Math.floor(10*Math.random())},(function(t,a){return a%2!==0?{text:P.a.lorem.text(),autor:H,id:P.a.datatype.uuid()}:{text:P.a.lorem.text(),autor:e.name,id:P.a.datatype.uuid()}}))))},W=0,B=G;W<B.length;W++)z();a(1676);var V=function(e){var t=e.message;return Object(w.jsx)(T.a,{sx:{display:"flex",flexDirection:"column"},children:Object(w.jsxs)("div",{className:"message-".concat(t.autor===H?"autor":"robot"),children:[t.text,Object(w.jsx)("span",{className:"signature",children:t.autor})]})})},X=function(e){var t=e.messageList;return Object(w.jsx)(T.a,{sx:{height:"calc(89vh - 57px)",overflow:"auto"},children:t.map((function(e,t){return Object(w.jsx)(V,{message:e},t)}))})},q=a(1780),J=a(1781),K=a(1784),Q=a(1774),Y=a(1783),Z=a(1777),$=a(151),ee=a.n($),te=a(1776),ae=a(1773),ce=a(1760),ne=(a(1677),a(32)),re=a.n(ne),se=a(44),ie="CHATS::ADD_CHAT",oe="CHATS::REMOVE_CHAT",ue=function(e){return{type:oe,chatId:e}},je=a(25),de={chatList:G},be=function(e){return e.chats.chatList},le="MESSAGES::ADD_MESSAGE",he="MESSAGES::REMOVE_MESSAGES_CHAT",Oe="MESSAGES::CHANGE_MESSAGES",fe=function(e,t,a,c){return function(n){n(function(e,t,a,c){return{type:le,text:e,autor:t,chatId:a,messageID:c}}(e,t,a,c))}},xe=function(e){return{type:he,chatId:e}},me=function(e){return e.messages.messageList},pe=a(77),ve=a(154),ge={messageList:U},Ce=function(e){var t=Object(o.b)(),a=function(e){t(function(e){return Object(se.a)(re.a.mark((function t(){return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:S.a.database().ref("chats").child(e).remove();case 1:case"end":return t.stop()}}),t)})))}(e)),t(function(e){return Object(se.a)(re.a.mark((function t(){return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:S.a.database().ref("messages").child(e).remove();case 1:case"end":return t.stop()}}),t)})))}(e))};return Object(w.jsxs)(te.a,{container:!0,justifyContent:"space-between",children:[Object(w.jsx)(te.a,{item:!0,xs:10,children:Object(w.jsxs)(j.c,{exact:!0,to:"".concat(O,"/").concat(e.chat.id),activeClassName:"selected",className:"chat-item",children:[Object(w.jsxs)(ae.a,{alignItems:"flex-start",children:[Object(w.jsx)(Y.a,{children:Object(w.jsx)(Z.a,{src:e.chat.avatar})}),Object(w.jsx)(Q.a,{primary:e.chat.name})]}),Object(w.jsx)(K.a,{variant:"inset"})]})}),Object(w.jsx)(te.a,{item:!0,xs:2,children:Object(w.jsx)(ce.a,{"aria-label":"delete",children:Object(w.jsx)(ee.a,{onClick:function(){return a(e.chat.id)}})})})]})},Se=(a(1682),n.a.memo((function(e){var t=e.chatList;return Object(w.jsx)(q.a,{children:Object(w.jsx)(J.a,{className:"list",children:t.map((function(e){return Object(w.jsx)(Ce,{chat:e},e.id)}))})})}))),ye=a(1764),we=a(1778),Ee=a(1766),Ae=a(1767),ke=a(1770),_e=a(1785),Ne=function(e){var t=Object(c.useState)(!1),a=Object(k.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(""),i=Object(k.a)(s,2),o=i[0],u=i[1],j=Object(c.useState)(!0),d=Object(k.a)(j,2),b=d[0],l=d[1],h=Object(c.useCallback)((function(){u(""),r(!1)}),[]);return Object(c.useEffect)((function(){l(!o)}),[o]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(ye.a,{variant:"contained",color:"primary",onClick:function(){return r(!n)},children:"Add chat"}),Object(w.jsxs)(we.a,{open:n,onClose:h,children:[Object(w.jsx)(Ee.a,{children:"Please enter the chat name"}),Object(w.jsx)(Ae.a,{children:Object(w.jsx)(ke.a,{autoFocus:!0,margin:"dense",id:"name",label:"name:",type:"text",fullWidth:!0,variant:"standard",value:o,onChange:function(e){return u(e.target.value)}})}),Object(w.jsxs)(_e.a,{children:[Object(w.jsx)(ye.a,{onClick:h,children:"Cancel"}),Object(w.jsx)(ye.a,{onClick:function(){e.onAddChat(o),u(""),r(!1)},disabled:b,children:"Submit"})]})]})]})},Ie=function(){var e=Object(o.b)();return function(t){return e((a=t,Object(se.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.a.database().ref("chats").push({name:a,avatar:P.a.image.avatar()});case 1:case"end":return e.stop()}}),e)})))));var a}},Le=function(){var e=Object(c.useState)([]),t=Object(k.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(!0),s=Object(k.a)(r,2),i=s[0],u=s[1],j=Ie(),b=Object(o.c)(me),l=Object(o.c)(be),h=Object(o.b)(),O=Object(d.g)(),x=Object(c.useCallback)((function(e){var t=l.find((function(e){return e.id===O.id}));h(function(e,t,a){return Object(se.a)(re.a.mark((function c(){return re.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:S.a.database().ref("messages").child(a.id).push({text:e,autor:t,id:P.a.datatype.uuid()}),setTimeout((function(){return S.a.database().ref("messages").child(a.id).push({text:P.a.lorem.text(),autor:a.name,id:P.a.datatype.uuid()})}),1500);case 2:case"end":return c.stop()}}),c)})))}(e,H,t))}),[O]);return Object(c.useEffect)((function(){var e,t=l.find((function(e){return e.id===O.id}));t?n(null!==(e=b[t.id])&&void 0!==e?e:[]):u(!1)}),[O,b]),i?Object(w.jsxs)(te.a,{container:!0,spacing:3,rowSpacing:-3,children:[Object(w.jsxs)(te.a,{item:!0,xs:4,container:"true",direction:"column",justifyContent:"center",children:[Object(w.jsx)(Se,{chatList:l}),Object(w.jsx)(Ne,{onAddChat:j})]}),Object(w.jsxs)(te.a,{item:!0,xs:8,sx:{height:"calc(100vh - 5vh)",padding:"3vh 0"},container:"true",direction:"column",justifyContent:"space-between",children:[Object(w.jsx)(X,{messageList:a}),Object(w.jsx)(R,{submit:x})]})]}):Object(w.jsx)(d.a,{to:f})},Te=function(){return Object(w.jsx)("p",{children:"Page not found!"})},Re=function(){var e=Object(o.c)(be),t=Ie();return Object(w.jsxs)(te.a,{container:!0,spacing:3,rowSpacing:-3,children:[Object(w.jsxs)(te.a,{item:!0,xs:4,container:"true",direction:"column",justifyContent:"center",children:[Object(w.jsx)(Se,{chatList:e}),Object(w.jsx)(Ne,{onAddChat:t})]}),Object(w.jsx)(te.a,{item:!0,xs:8,sx:{height:"calc(100vh - 5vh)",padding:"3vh 0"},container:"true",direction:"column",justifyContent:"center",alignContent:"center",children:Object(w.jsx)("span",{children:"Please select a chat"})})]})},Me=a(1779),De=(a(1683),function(){return Object(w.jsxs)(Me.a,{className:"breadcrumbs",children:[Object(w.jsx)(j.c,{exact:!0,activeClassName:"selected",to:b,children:"Main"}),Object(w.jsx)(j.c,{exact:!0,activeClassName:"selected",to:l,children:"Profile"}),Object(w.jsx)(j.c,{exact:!0,activeClassName:"selected",to:h,children:"Chats"}),Object(w.jsx)(j.c,{exact:!0,activeClassName:"selected",to:x,children:"Cat_Random"}),Object(w.jsx)(j.c,{exact:!0,activeClassName:"selected",to:m,children:"Sign up"}),Object(w.jsx)(j.c,{exact:!0,activeClassName:"selected",to:p,children:"Sign in"})]})}),Fe=a(1786),Pe=function(){var e=Object(o.c)(be),t=Ie();return Object(w.jsx)(Fe.a,{sx:{bgcolor:"#cfe8fc",height:"100vh"},children:Object(w.jsxs)(te.a,{container:!0,spacing:3,rowSpacing:-3,children:[Object(w.jsxs)(te.a,{item:!0,xs:4,container:"true",direction:"column",justifyContent:"center",children:[Object(w.jsx)(Se,{chatList:e}),Object(w.jsx)(Ne,{onAddChat:t})]}),Object(w.jsx)(te.a,{item:!0,xs:8,sx:{height:"calc(100vh - 5vh)",padding:"3vh 0"},container:"true",direction:"column",justifyContent:"center",alignContent:"center",children:Object(w.jsx)("span",{children:"Please select a chat"})})]})})},He=a(1768),Ge="CATS_RANDOM::GET_CAT_START",Ue="CATS_RANDOM::GET_CAT_SUCCESS",ze="CATS_RANDOM::GET_CAT_ERROR",We=function(){return function(){var e=Object(se.a)(re.a.mark((function e(t){var a,c;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Ge}),e.prev=1,e.next=4,fetch("https://cataas.com/cat?json=true");case 4:if((a=e.sent).ok){e.next=7;break}throw new Error(a.status);case 7:return e.next=9,a.json();case 9:c=e.sent,t((n=c.url,{type:Ue,payload:n})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t({type:ze});case 16:case"end":return e.stop()}var n}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()},Be={image:null,loading:!0,error:!1},Ve=function(e){return e.catRandom},Xe=(a(1684),function(){var e=Object(o.c)(Ve),t=e.image,a=e.loading,n=e.error,r=Object(o.b)(),s=Object(c.useCallback)((function(){r(We())}),[]);return Object(c.useEffect)((function(){return r(We())}),[]),a?Object(w.jsx)(He.a,{}):n?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h3",{children:"Error"}),Object(w.jsx)(ye.a,{onClick:s,children:"Retry"})]}):Object(w.jsxs)("div",{className:"cat",children:[Object(w.jsx)("img",{className:"cat-img",src:"https://cataas.com/".concat(t),alt:"catRandom"}),Object(w.jsx)(ye.a,{variant:"contained",onClick:s,children:"Change image"})]})}),qe=(a(1685),function(e){var t=e.handleSubmit,a=Object(c.useState)(""),n=Object(k.a)(a,2),r=n[0],s=n[1],i=Object(c.useState)(""),o=Object(k.a)(i,2),u=o[0],j=o[1];return Object(w.jsxs)(te.a,{container:!0,direction:"column",alignItems:"center",children:[Object(w.jsx)(te.a,{item:!0,children:Object(w.jsx)(_.a,{className:"text-field",margin:"normal",type:"email",value:r,onChange:function(e){s(e.target.value)},autoFocus:"true",placeholder:"e-mail"})}),Object(w.jsx)(te.a,{item:!0,children:Object(w.jsx)(_.a,{className:"text-field",margin:"normal",type:"password",value:u,onChange:function(e){j(e.target.value)},placeholder:"password"})}),Object(w.jsx)(te.a,{item:!0,children:Object(w.jsx)(N.a,{onClick:function(){return t(r,u)},size:"large",variant:"contained",endIcon:Object(w.jsx)(L.a,{}),children:"Send"})})]})}),Je=function(){var e=Object(c.useState)(""),t=Object(k.a)(e,2),a=t[0],n=t[1],r=function(){var e=Object(se.a)(re.a.mark((function e(t,a){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(""),e.prev=1,e.next=4,S.a.auth().createUserWithEmailAndPassword(t,a);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),n(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("p",{children:"Fill in the form below to register new account."}),Object(w.jsx)(qe,{handleSubmit:r}),a&&Object(w.jsx)("p",{children:a}),Object(w.jsxs)("p",{children:["Already have an account? ",Object(w.jsx)(j.b,{to:p,children:"Sign in"})]})]})},Ke=function(){var e=Object(c.useState)(""),t=Object(k.a)(e,2),a=t[0],n=t[1],r=function(){var e=Object(se.a)(re.a.mark((function e(t,a){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(""),e.prev=1,e.next=4,S.a.auth().signInWithEmailAndPassword(t,a);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),n(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("p",{children:"Fill in the form below to login to your account."}),Object(w.jsx)(qe,{handleSubmit:r}),a&&Object(w.jsx)("p",{children:a}),Object(w.jsxs)("p",{children:["Don't have an account? ",Object(w.jsx)(j.b,{to:m,children:"Sign up"})]})]})},Qe=["authed"],Ye=n.a.memo((function(e){var t=e.authed,a=Object(pe.a)(e,Qe);return t?Object(w.jsx)(d.a,{to:h}):Object(w.jsx)(d.b,Object(D.a)({},a))})),Ze=["authed"],$e=n.a.memo((function(e){var t=e.authed,a=Object(pe.a)(e,Ze);return t?Object(w.jsx)(d.b,Object(D.a)({},a)):Object(w.jsx)(d.a,{to:p})})),et={showName:!0,name:"Vasya",authed:!1},tt=(a(1686),function(){var e=Object(o.b)(),t=Object(o.c)(v).authed,a=Object(o.c)(me),n=Object(o.c)(be);return Object(c.useEffect)((function(){e((function(e){S.a.auth().onAuthStateChanged((function(t){e(y(!!t))}))}))}),[]),Object(c.useEffect)((function(){e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return Object(se.a)(re.a.mark((function t(){return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:S.a.database().ref("messages").set(e);case 1:case"end":return t.stop()}}),t)})))}(a)),e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G;return Object(se.a)(re.a.mark((function t(){var a;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a={},e.forEach((function(e){a=Object(D.a)(Object(D.a)({},a),{},Object(M.a)({},e.id,{id:e.id,name:e.name,avatar:e.avatar}))})),S.a.database().ref("chats").set(a);case 3:case"end":return t.stop()}}),t)})))}(n))}),[]),Object(c.useEffect)((function(){e((function(e,t){S.a.database().ref("messages").on("child_changed",(function(t){var a=t.key,c={};t.forEach((function(e){c=e.val()})),e(fe(c.text,c.autor,a,c.Id))})),S.a.database().ref("messages").on("child_added",(function(a){var c,n=a.key,r=me(t()),s={};a.forEach((function(e){return s=e.val()})),!(null===(c=r[n])||void 0===c?void 0:c.find((function(e){return s.id===e.id})))&&e(fe(s.text,s.autor,n,s.Id))})),S.a.database().ref("messages").on("child_removed",(function(t){e(xe(t.key))}))})),e((function(e,t){S.a.database().ref("chats").on("child_added",(function(a){var c=be(t()),n=Object(D.a)(Object(D.a)({},a.val()),{},{id:a.key});!c.find((function(e){return e.id===a.key}))&&e({type:ie,newChat:n})})),S.a.database().ref("chats").on("child_removed",(function(a){be(t()).find((function(e){return e.id===a.key}))&&e(ue(a.key))}))}))}),[]),Object(w.jsx)(j.a,{children:Object(w.jsxs)(Fe.a,{className:"container",children:[Object(w.jsx)(De,{}),Object(w.jsxs)(d.d,{children:[Object(w.jsx)($e,{authed:t,exact:!0,path:b,children:Object(w.jsx)(A,{})}),Object(w.jsx)($e,{authed:t,exact:!0,path:l,children:Object(w.jsx)(E,{})}),Object(w.jsx)($e,{authed:t,exact:!0,path:h,children:Object(w.jsx)(Re,{})}),Object(w.jsx)($e,{authed:t,exact:!0,path:"".concat(O,"/:id"),children:Object(w.jsx)(Le,{})}),Object(w.jsx)($e,{authed:t,exact:!0,path:x,children:Object(w.jsx)(Xe,{})}),Object(w.jsx)(Ye,{authed:t,exact:!0,path:m,children:Object(w.jsx)(Je,{})}),Object(w.jsx)(Ye,{authed:t,exact:!0,path:p,children:Object(w.jsx)(Ke,{})}),Object(w.jsx)($e,{authed:t,exact:!0,path:f,children:Object(w.jsx)(Pe,{})}),Object(w.jsx)($e,{authed:t,children:Object(w.jsx)(Te,{})})]})]})})}),at=a(60),ct=a(153),nt=a(117),rt=a(152),st=a.n(rt),it=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||at.c,ot={key:"root",storage:st.a},ut=Object(at.b)({profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(D.a)(Object(D.a)({},e),{},{authed:t.user});case g:return Object(D.a)(Object(D.a)({},e),{},{showName:!e.showName});default:return e}},chats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return Object(D.a)(Object(D.a)({},e),{},{chatList:[].concat(Object(je.a)(e.chatList),[t.newChat])});case oe:return Object(D.a)(Object(D.a)({},e),{},{chatList:e.chatList.filter((function(e){return e.id!==t.chatId}))});default:return e}},messages:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Oe:return Object(D.a)(Object(D.a)({},t),{},{messageList:[a.messages]});case le:var c=null!==(e=t.messageList[a.chatId])&&void 0!==e?e:[];return Object(D.a)(Object(D.a)({},t),{},{messageList:Object(D.a)(Object(D.a)({},t.messageList),{},Object(M.a)({},a.chatId,[].concat(Object(je.a)(c),[{text:a.text,autor:a.autor,id:a.messageId}])))});case he:var n=t.messageList,r=a.chatId,s=(n[r],Object(pe.a)(n,[r].map(ve.a)));return Object(D.a)(Object(D.a)({},t),{},{messageList:Object(D.a)({},s)});default:return t}},catRandom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:return Object(D.a)(Object(D.a)({},e),{},{image:t.payload,loading:!1});case Ge:return Object(D.a)(Object(D.a)({},e),{},{loading:!0,error:!1});case ze:return Object(D.a)(Object(D.a)({},e),{},{loading:!1,error:!0});default:return e}}}),jt=Object(nt.a)(ot,ut),dt=Object(at.d)(jt,it(Object(at.a)(ct.a))),bt=Object(nt.b)(dt),lt=function(){return Object(w.jsx)(o.a,{store:dt,children:Object(w.jsx)(u.a,{loading:null,persistor:bt,children:Object(w.jsx)(tt,{})})})};a(1689),a(1690),a(1691);S.a.initializeApp({apiKey:"AIzaSyDhlywq-HHUc0mMkX6v24b5DeqsTzswz7A",authDomain:"react-course-bas.firebaseapp.com",databaseURL:"https://react-course-bas-default-rtdb.firebaseio.com",projectId:"react-course-bas",storageBucket:"react-course-bas.appspot.com",messagingSenderId:"390455142693",appId:"1:390455142693:web:644a22876d48afdd2852cc"}),s.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(lt,{})}),document.getElementById("root")),i()}},[[1692,1,2]]]);
//# sourceMappingURL=main.fd94501e.chunk.js.map